# Migration `20210205183152-adds-user-teams-model`

This migration has been generated by Nirmalya Ghosh at 2/6/2021, 12:01:52 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "UserTeams" (
"id" SERIAL,
    "userId" INTEGER,
    "teamId" INTEGER,

    PRIMARY KEY ("id")
)

ALTER TABLE "UserTeams" ADD FOREIGN KEY("userId")REFERENCES "User"("id") ON DELETE SET NULL ON UPDATE CASCADE

ALTER TABLE "UserTeams" ADD FOREIGN KEY("teamId")REFERENCES "Team"("id") ON DELETE SET NULL ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20210205181144-adds-name-to-team..20210205183152-adds-user-teams-model
--- datamodel.dml
+++ datamodel.dml
@@ -2,9 +2,9 @@
 // learn more about it in the docs: https://pris.ly/d/prisma-schema
 datasource db {
   provider = "postgres"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
@@ -12,18 +12,19 @@
 // --------------------------------------
 model User {
-  id             Int       @id @default(autoincrement())
-  createdAt      DateTime  @default(now())
-  updatedAt      DateTime  @updatedAt
+  id             Int         @id @default(autoincrement())
+  createdAt      DateTime    @default(now())
+  updatedAt      DateTime    @updatedAt
   name           String?
-  email          String    @unique
+  email          String      @unique
   hashedPassword String?
-  role           String    @default("user")
+  role           String      @default("user")
   sessions       Session[]
   comments       Comment[]
-  Team           Team?     @relation(fields: [teamId], references: [id])
+  UserTeams      UserTeams[]
+  Team           Team?       @relation(fields: [teamId], references: [id])
   teamId         Int?
 }
 model Session {
@@ -74,11 +75,20 @@
   coordinateY Float
 }
 model Team {
-  id        Int       @id @default(autoincrement())
-  createdAt DateTime  @default(now())
-  updatedAt DateTime  @updatedAt
-  users     User[]
+  id        Int         @id @default(autoincrement())
+  createdAt DateTime    @default(now())
+  updatedAt DateTime    @updatedAt
   projects  Project[]
   name      String
+  UserTeams UserTeams[]
+  User      User[]
 }
+
+model UserTeams {
+  id     Int   @id @default(autoincrement())
+  user   User? @relation(fields: [userId], references: [id])
+  team   Team? @relation(fields: [teamId], references: [id])
+  userId Int?
+  teamId Int?
+}
```


